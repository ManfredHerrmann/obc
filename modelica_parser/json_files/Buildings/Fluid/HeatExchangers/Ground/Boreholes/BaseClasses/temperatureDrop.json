{"within":[{"name":"Buildings.Fluid.HeatExchangers.Ground.Boreholes.BaseClasses"}],"class_definition":[{"class_prefixes":{"prefix":"nullnull null function"},"class_specifier":{"long_class_specifier":{"name":"temperatureDrop","comment":{"string":"\"Calculate the temperature drop of the soil at the external boundary of the cylinder\""},"composition":{"protect":["protected"],"element_list":{"element":[{"component_clause":{"type_prefix":{"prefix":" input"},"type_specifier":{"specifier":{"name":"ExtendableArray"}},"component_list":{"component_declaration":[{"declaration":{"name":"table"},"comment":{"comment":{"string":"\"External object that contains the history terms of the heat flux\""}}}]}}},{"component_clause":{"type_prefix":{"prefix":" input"},"type_specifier":{"specifier":{"name":"Integer"}},"component_list":{"component_declaration":[{"declaration":{"name":"iSam","modification":{"class_modification":{"argument_list":{"argument":[{"element_modification_or_replaceable":{"element_modification":{"name":{"name":"min"},"modification":{"symbol":"\u003d","expression":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"simple_primary":"1"}]}}]}}}}}}}},"comment":{}}}}]}}}},"comment":{"comment":{"string":"\"Counter for how many time the model was sampled. Defined as iSam\u003d1 when called at t\u003d0\""}}}]}}},{"component_clause":{"type_prefix":{"prefix":" input"},"type_specifier":{"specifier":{"name":"Modelica.SIunits.HeatFlowRate"}},"component_list":{"component_declaration":[{"declaration":{"name":"Q_flow"},"comment":{"comment":{"string":"\"Heat flow rate to be stored in the external object\""}}}]}}},{"component_clause":{"type_prefix":{"prefix":" input"},"type_specifier":{"specifier":{"name":"Modelica.SIunits.Time"}},"component_list":{"component_declaration":[{"declaration":{"name":"samplePeriod"},"comment":{"comment":{"string":"\"Period between two samples\""}}}]}}},{"component_clause":{"type_prefix":{"prefix":" input"},"type_specifier":{"specifier":{"name":"Modelica.SIunits.Radius"}},"component_list":{"component_declaration":[{"declaration":{"name":"rExt"},"comment":{"comment":{"string":"\"External radius of the cylinder\""}}}]}}},{"component_clause":{"type_prefix":{"prefix":" input"},"type_specifier":{"specifier":{"name":"Modelica.SIunits.Height"}},"component_list":{"component_declaration":[{"declaration":{"name":"hSeg"},"comment":{"comment":{"string":"\"Height of the cylinder\""}}}]}}},{"component_clause":{"type_prefix":{"prefix":" input"},"type_specifier":{"specifier":{"name":"Modelica.SIunits.ThermalConductivity"}},"component_list":{"component_declaration":[{"declaration":{"name":"k"},"comment":{"comment":{"string":"\"Thermal conductivity of the soil\""}}}]}}},{"component_clause":{"type_prefix":{"prefix":" input"},"type_specifier":{"specifier":{"name":"Modelica.SIunits.Density"}},"component_list":{"component_declaration":[{"declaration":{"name":"d"},"comment":{"comment":{"string":"\"Density of the soil\""}}}]}}},{"component_clause":{"type_prefix":{"prefix":" input"},"type_specifier":{"specifier":{"name":"Modelica.SIunits.SpecificHeatCapacity"}},"component_list":{"component_declaration":[{"declaration":{"name":"c"},"comment":{"comment":{"string":"\"Specific heat capacity of the soil\""}}}]}}},{"component_clause":{"type_prefix":{"prefix":" output"},"type_specifier":{"specifier":{"name":"Modelica.SIunits.TemperatureDifference"}},"component_list":{"component_declaration":[{"declaration":{"name":"dT"},"comment":{"comment":{"string":"\"Temperature drop of the soil\""}}}]}}}]},"prefixed_element":[{"element":[{"component_clause":{"type_prefix":{},"type_specifier":{"specifier":{"name":"Modelica.SIunits.Time"}},"component_list":{"component_declaration":[{"declaration":{"name":"minSamplePeriod","modification":{"symbol":"\u003d","expression":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"component_reference":{"component":"rExt"}},{"simple_primary":"2"}],"operator":"^"},"mul_op":[{"mul_op":"/"}],"factors":[{"primarys":[{"output_expression_list":{"expression":[{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"simple_primary":"4"}]},"mul_op":[{"mul_op":"*"},{"mul_op":"*"}],"factors":[{"primarys":[{"output_expression_list":{"expression":[{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"component_reference":{"component":"k"}}]},"mul_op":[{"mul_op":"/"},{"mul_op":"/"}],"factors":[{"primarys":[{"component_reference":{"component":"c"}}]},{"primarys":[{"component_reference":{"component":"d"}}]}]}]}}}}}}}]}}]},{"primarys":[{"simple_primary":"3.8"}]}]}]}}}}}}}]}}]}]}]}}}}}}}}},"comment":{"comment":{"string":"\"Minimal length of the sampling period\""}}}]}}},{"component_clause":{"type_prefix":{},"type_specifier":{"specifier":{"name":"Modelica.SIunits.HeatFlowRate"}},"component_list":{"component_declaration":[{"declaration":{"name":"QL_flow"},"comment":{"comment":{"string":"\"Intermediate variable for heat flow rate at the lower bound of the time interval\""}}}]}}},{"component_clause":{"type_prefix":{},"type_specifier":{"specifier":{"name":"Modelica.SIunits.HeatFlowRate"}},"component_list":{"component_declaration":[{"declaration":{"name":"QU_flow"},"comment":{"comment":{"string":"\"Intermediate variable for heat flow rate at the upper bound of the time interval\""}}}]}}}]}],"algorithm_section":[{"algorithm":"algorithm","statement":[{"component_reference":{"component":"assert"},"function_call_args":{"arguments":{"argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"component_reference":{"component":"rExt"}}]},"mul_op":[{"mul_op":"*"},{"mul_op":"/"}],"factors":[{"primarys":[{"component_reference":{"component":"rExt"}}]},{"primarys":[{"output_expression_list":{"expression":[{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"simple_primary":"4"}]},"mul_op":[{"mul_op":"*"},{"mul_op":"*"}],"factors":[{"primarys":[{"output_expression_list":{"expression":[{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"component_reference":{"component":"k"}}]},"mul_op":[{"mul_op":"/"},{"mul_op":"/"}],"factors":[{"primarys":[{"component_reference":{"component":"c"}}]},{"primarys":[{"component_reference":{"component":"d"}}]}]}]}}}}}}}]}}]},{"primarys":[{"component_reference":{"component":"samplePeriod"}}]}]}]}}}}}}}]}}]}]}]},"rel_op":{"rel_op":"\u003c\u003d"},"expression2":{"terms":[{"factor":{"primarys":[{"simple_primary":"3.8"}]}}]}}}}}}}},"arguments":{"argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"simple_primary":"\"The samplePeriod has to be bigger than \""}]}},{"factor":{"primarys":[{"name":{"name":"String"},"function_call_args":{"arguments":{"argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"component_reference":{"component":"minSamplePeriod"}}]}}]}}}}}}}}}}}]}},{"factor":{"primarys":[{"simple_primary":"\" for convergence purpose.\n  samplePeriod \u003d \""}]}},{"factor":{"primarys":[{"name":{"name":"String"},"function_call_args":{"arguments":{"argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"component_reference":{"component":"samplePeriod"}}]}}]}}}}}}}}}}}]}}],"adds":[{"add_op":"+"},{"add_op":"+"},{"add_op":"+"}]}}}}}}}}}}},"comment":{"comment":{}}},{"if_statement":{"iF":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"component_reference":{"component":"iSam"}}]}}]},"rel_op":{"rel_op":"\u003d\u003d"},"expression2":{"terms":[{"factor":{"primarys":[{"simple_primary":"1"}]}}]}}}}}}},"if_then":[{"component_reference":{"component":"dT"},"operator":":\u003d","expression":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"simple_primary":"0"}]}}]}}}}}}},"comment":{"comment":{}}},{"component_reference":{"component":"QL_flow"},"operator":":\u003d","expression":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"name":{"name":"Buildings.Fluid.HeatExchangers.Ground.Boreholes.BaseClasses.exchangeValues"},"function_call_args":{"arguments":{"named_arguments":{"argument":{"name":"table","argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"component_reference":{"component":"table"}}]}}]}}}}}}}}},"arguments":{"argument":{"name":"iX","argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"component_reference":{"component":"iSam"}}]}}]}}}}}}}}},"arguments":{"argument":{"name":"x","argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"component_reference":{"component":"Q_flow"}}]}}]}}}}}}}}},"arguments":{"argument":{"name":"iY","argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"component_reference":{"component":"iSam"}}]}}]}}}}}}}}}}}}}}}}]}}]}}}}}}},"comment":{"comment":{}}},{"component_reference":{"component":"dT"},"operator":":\u003d","expression":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"simple_primary":"0"}]}}]}}}}}}},"comment":{"comment":{}}},{"for_statement":{"loop_indices":{"for_index":[{"for_index":"i","in_expression":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"simple_primary":"1"}]}}]}}}}},"operator1":":","expression2":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"output_expression_list":{"expression":[{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"component_reference":{"component":"iSam"}}]}},{"factor":{"primarys":[{"simple_primary":"1"}]}}],"adds":[{"add_op":"-"}]}}}}}}}]}}]}}]}}}}}}}}]},"loop_statements":[{"component_reference":{"component":"QL_flow"},"operator":":\u003d","expression":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"name":{"name":"Buildings.Fluid.HeatExchangers.Ground.Boreholes.BaseClasses.exchangeValues"},"function_call_args":{"arguments":{"named_arguments":{"argument":{"name":"table","argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"component_reference":{"component":"table"}}]}}]}}}}}}}}},"arguments":{"argument":{"name":"iX","argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"component_reference":{"component":"iSam"}}]}}]}}}}}}}}},"arguments":{"argument":{"name":"x","argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"component_reference":{"component":"Q_flow"}}]}}]}}}}}}}}},"arguments":{"argument":{"name":"iY","argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"component_reference":{"component":"iSam"}}]}},{"factor":{"primarys":[{"simple_primary":"1"}]}},{"factor":{"primarys":[{"component_reference":{"component":"i"}}]}}],"adds":[{"add_op":"+"},{"add_op":"-"}]}}}}}}}}}}}}}}}}]}}]}}}}}}},"comment":{"comment":{}}},{"component_reference":{"component":"QU_flow"},"operator":":\u003d","expression":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"name":{"name":"Buildings.Fluid.HeatExchangers.Ground.Boreholes.BaseClasses.exchangeValues"},"function_call_args":{"arguments":{"named_arguments":{"argument":{"name":"table","argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"component_reference":{"component":"table"}}]}}]}}}}}}}}},"arguments":{"argument":{"name":"iX","argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"component_reference":{"component":"iSam"}}]}}]}}}}}}}}},"arguments":{"argument":{"name":"x","argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"component_reference":{"component":"Q_flow"}}]}}]}}}}}}}}},"arguments":{"argument":{"name":"iY","argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"component_reference":{"component":"iSam"}}]}},{"factor":{"primarys":[{"component_reference":{"component":"i"}}]}}],"adds":[{"add_op":"-"}]}}}}}}}}}}}}}}}}]}}]}}}}}}},"comment":{"comment":{}}},{"component_reference":{"component":"dT"},"operator":":\u003d","expression":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"component_reference":{"component":"dT"}}]}},{"factor":{"primarys":[{"simple_primary":"1"}]},"mul_op":[{"mul_op":"/"},{"mul_op":"*"},{"mul_op":"*"},{"mul_op":"/"}],"factors":[{"primarys":[{"output_expression_list":{"expression":[{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"simple_primary":"4"}]},"mul_op":[{"mul_op":"*"},{"mul_op":"*"}],"factors":[{"primarys":[{"component_reference":{"component":"Modelica.Constants.pi"}}]},{"primarys":[{"component_reference":{"component":"k"}}]}]}]}}}}}}}]}}]},{"primarys":[{"name":{"name":"Buildings.Fluid.HeatExchangers.Ground.Boreholes.BaseClasses.powerSeries"},"function_call_args":{"arguments":{"named_arguments":{"argument":{"name":"u","argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"component_reference":{"component":"c"}}]},"mul_op":[{"mul_op":"*"},{"mul_op":"/"},{"mul_op":"*"}],"factors":[{"primarys":[{"component_reference":{"component":"d"}}]},{"primarys":[{"output_expression_list":{"expression":[{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"simple_primary":"4"}]},"mul_op":[{"mul_op":"*"},{"mul_op":"*"},{"mul_op":"*"}],"factors":[{"primarys":[{"component_reference":{"component":"k"}}]},{"primarys":[{"component_reference":{"component":"i"}}]},{"primarys":[{"component_reference":{"component":"samplePeriod"}}]}]}]}}}}}}}]}}]},{"primarys":[{"component_reference":{"component":"rExt"}},{"simple_primary":"2"}],"operator":"^"}]}]}}}}}}}}},"arguments":{"argument":{"name":"N","argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"simple_primary":"10"}]}}]}}}}}}}}}}}}}}]},{"primarys":[{"output_expression_list":{"expression":[{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"component_reference":{"component":"QL_flow"}}]}},{"factor":{"primarys":[{"component_reference":{"component":"QU_flow"}}]}}],"adds":[{"add_op":"-"}]}}}}}}}]}}]},{"primarys":[{"component_reference":{"component":"hSeg"}}]}]}],"adds":[{"add_op":"+"}]}}}}}}},"comment":{"comment":{}}}]},"comment":{"comment":{}}}]},"comment":{"comment":{}}}]}],"comp_annotation":{"prefix":"annotation","annotation":{"argument_list":{"argument":[{"element_modification_or_replaceable":{"element_modification":{"name":{"name":"Documentation"},"modification":{"class_modification":{"argument_list":{"argument":[{"element_modification_or_replaceable":{"element_modification":{"name":{"name":"info"},"modification":{"symbol":"\u003d","expression":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"simple_primary":"\"\u003chtml\u003e\n\u003cp\u003e\nThis function calculates the temperature drop of the soil at the outer boundary of the cylinder.\nThe analytical formula of Hart and Couvillion (1986) for constant\nheat extraction is adapted to a non-constant heat flux.\nTo adapt the formula for a variable rate of heat extraction,\ndifferent constant heat extraction rates, starting at different time instances,\nare super-imposed.\nTo obtain the temperature drop at the time \u003ci\u003et\u003dn*\u0026Delta;t\u003c/i\u003e, the effects of\nconstant rate of heat extractions are super-imposed as\n\u003c/p\u003e\n\u003cp align\u003d\\\"center\\\" style\u003d\\\"font-style:italic;\\\"\u003e\n\u0026Delta;T ( r , t\u003dn \u0026Delta;t )\u003d 1 \u0026frasl; ( 4 \u0026pi; k )\n  \u0026sum;  W(u(r, t\u003d i \u0026Delta;t)) (q\u003csub\u003en-i+1\u003c/sub\u003e-q\u003csub\u003en-i\u003c/sub\u003e),\n\u003c/p\u003e\n\u003cp\u003e\nwhere \u003ci\u003er\u003c/i\u003e is the radius for which the temperature is computed,\n\u003ci\u003ek\u003c/i\u003e is the thermal conductivity of the material,\n\u003ci\u003eW\u003c/i\u003e is a solution of the heat conduction in polar coordinates and\n\u003ci\u003eq\u003csub\u003ei\u003c/sub\u003e\u003dQ\u003csub\u003ei\u003c/sub\u003e/h\u003c/i\u003e is\nthe specific rate of heat extraction per unit length at time\n\u003ci\u003et\u003di \u0026Delta;t\u003c/i\u003e.\nThe value of\n\u003ci\u003eW\u003c/i\u003e is obtained using\n\u003c/p\u003e\n\u003cp align\u003d\\\"center\\\" style\u003d\\\"font-style:italic;\\\"\u003e\nW(u)\u003d[-0.5772 - ln(u) + u - u\u003csup\u003e2\u003c/sup\u003e/(2 \u0026nbsp; 2!) +u\u003csup\u003e3\u003c/sup\u003e/(3 \u0026nbsp; 3!) - u\u003csup\u003e4\u003c/sup\u003e/(4 \u0026nbsp; 4!) + ....].\n\u003c/p\u003e\n\u003cp\u003e\nwhere\n\u003ci\u003eu(r,t)\u003d c \u0026rho; r\u003csup\u003e2\u003c/sup\u003e \u0026frasl; (4 t k) \u003c/i\u003e,\n\u003ci\u003e\u0026rho;\u003c/i\u003e is the mass density and\n\u003ci\u003ec\u003c/i\u003e is the specific heat capacity per unit mass.\n\u003c/p\u003e\n\u003ch4\u003eImplementation\u003c/h4\u003e\n\u003cp\u003e\nThe rate of heat flow \u003ci\u003eQ\u003csub\u003ei\u003c/sub\u003e\u003c/i\u003e is obtained from the function\n\u003ca href\u003d\\\"modelica://Buildings.Fluid.HeatExchangers.Ground.Boreholes.BaseClasses.exchangeValues\\\"\u003e\nBuildings.Fluid.HeatExchangers.Ground.Boreholes.BaseClasses.exchangeValues\u003c/a\u003e.\n\u003c/p\u003e\n\u003ch4\u003eReferences\u003c/h4\u003e\n\u003cp\u003e\nHart and Couvillion, (1986). \u003ci\u003eEarth Coupled Heat Transfer.\u003c/i\u003e\nPublication of the National Water Well Association.\n\u003c/p\u003e\n\u003c/html\u003e\""}]}}]}}}}}}}},"comment":{}}}},{"element_modification_or_replaceable":{"element_modification":{"name":{"name":"revisions"},"modification":{"symbol":"\u003d","expression":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"simple_primary":"\"\u003chtml\u003e\n\u003cul\u003e\n\u003cli\u003e\nJuly 27, 2011, by Pierre Vigouroux:\u003cbr/\u003e\nFirst implementation.\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/html\u003e\""}]}}]}}}}}}}},"comment":{}}}}]}}},"comment":{}}}}]}}}}}}}]}
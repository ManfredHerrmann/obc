{"within":[{"name":"Buildings.Fluid.Examples.Performance"}],"class_definition":[{"class_prefixes":{"prefix":"model"},"class_specifier":{"long_class_specifier":{"name":"Example1v1","comment":{"string":"\"Example 1 model without mixing volume\""},"composition":{"element_list":{"element":[{"extends_clause":{"name":{"name":"Buildings.Fluid.Examples.Performance.BaseClasses.Example1"},"class_modification":{"argument_list":{"argument":[{"element_modification_or_replaceable":{"element_modification":{"name":{"name":"allowFlowReversal"},"modification":{"class_modification":{"argument_list":{"argument":[{"element_modification_or_replaceable":{"element_modification":{"name":{"name":"k"},"modification":{"symbol":"\u003d","expression":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"simple_primary":"false"}]}}]}}}}}}}},"comment":{}}}}]}}},"comment":{}}}},{"element_modification_or_replaceable":{"element_modification":{"name":{"name":"from_dp"},"modification":{"class_modification":{"argument_list":{"argument":[{"element_modification_or_replaceable":{"element_modification":{"name":{"name":"k"},"modification":{"symbol":"\u003d","expression":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"simple_primary":"true"}]}}]}}}}}}}},"comment":{}}}}]}}},"comment":{}}}}]}}}}]},"equation_section":[{"prefix":" equation","equation":[{"for_equation":{"loop_indices":{"for_index":[{"for_index":"i","in_expression":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"simple_primary":"1"}]}}]}}}}},"operator1":":","expression2":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"component_reference":{"component":"nRes.k"}}]}}]}}}}}}}}]},"loop_equations":[{"connect_clause":{"component":[{"component":"res.port_b","array":[{"subscript":[{"subscript":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"component_reference":{"component":"i"}}]}}]}}}}}}}}]}]},{"component":"val.port_3"}]},"comment":{"comment":{},"annotation":{"prefix":"annotation","annotation":{"argument_list":{"argument":[{"element_modification_or_replaceable":{"element_modification":{"name":{"name":"Line"},"modification":{"class_modification":{"argument_list":{"argument":[{"element_modification_or_replaceable":{"element_modification":{"name":{"name":"points"},"modification":{"symbol":"\u003d","expression":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"function_arguments":{"argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"function_arguments":{"argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"simple_primary":"90"}]}}]}}}}}}}},"arguments":{"argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"simple_primary":"30"}]}}]}}}}}}}}}}}]}}]}}}}}}}},"arguments":{"argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"function_arguments":{"argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"simple_primary":"100"}]}}]}}}}}}}},"arguments":{"argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"simple_primary":"30"}]}}]}}}}}}}}}}}]}}]}}}}}}}},"arguments":{"argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"function_arguments":{"argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"simple_primary":"100"}]}}]}}}}}}}},"arguments":{"argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"add_pre":{"add_op":"-"},"terms":[{"factor":{"primarys":[{"simple_primary":"10"}]}}]}}}}}}}}}}}]}}]}}}}}}}},"arguments":{"argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"function_arguments":{"argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"simple_primary":"20"}]}}]}}}}}}}},"arguments":{"argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"add_pre":{"add_op":"-"},"terms":[{"factor":{"primarys":[{"simple_primary":"10"}]}}]}}}}}}}}}}}]}}]}}}}}}}},"arguments":{"argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"function_arguments":{"argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"simple_primary":"20"}]}}]}}}}}}}},"arguments":{"argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"simple_primary":"20"}]}}]}}}}}}}}}}}]}}]}}}}}}}}}}}}}}]}}]}}}}}}}},"comment":{}}}},{"element_modification_or_replaceable":{"element_modification":{"name":{"name":"color"},"modification":{"symbol":"\u003d","expression":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"function_arguments":{"argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"simple_primary":"0"}]}}]}}}}}}}},"arguments":{"argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"simple_primary":"127"}]}}]}}}}}}}},"arguments":{"argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"simple_primary":"255"}]}}]}}}}}}}}}}}}]}}]}}}}}}}},"comment":{}}}}]}}},"comment":{}}}}]}}}}}]},"comment":{"comment":{}}}]}],"comp_annotation":{"prefix":"annotation","annotation":{"argument_list":{"argument":[{"element_modification_or_replaceable":{"element_modification":{"name":{"name":"experiment"},"modification":{"class_modification":{"argument_list":{"argument":[{"element_modification_or_replaceable":{"element_modification":{"name":{"name":"Tolerance"},"modification":{"symbol":"\u003d","expression":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"simple_primary":"1e-6"}]}}]}}}}}}}},"comment":{}}}},{"element_modification_or_replaceable":{"element_modification":{"name":{"name":"StopTime"},"modification":{"symbol":"\u003d","expression":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"simple_primary":"20"}]}}]}}}}}}}},"comment":{}}}}]}}},"comment":{}}}},{"element_modification_or_replaceable":{"element_modification":{"name":{"name":"Diagram"},"modification":{"class_modification":{"argument_list":{"argument":[{"element_modification_or_replaceable":{"element_modification":{"name":{"name":"coordinateSystem"},"modification":{"class_modification":{"argument_list":{"argument":[{"element_modification_or_replaceable":{"element_modification":{"name":{"name":"preserveAspectRatio"},"modification":{"symbol":"\u003d","expression":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"simple_primary":"false"}]}}]}}}}}}}},"comment":{}}}},{"element_modification_or_replaceable":{"element_modification":{"name":{"name":"extent"},"modification":{"symbol":"\u003d","expression":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"function_arguments":{"argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"function_arguments":{"argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"add_pre":{"add_op":"-"},"terms":[{"factor":{"primarys":[{"simple_primary":"100"}]}}]}}}}}}}},"arguments":{"argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"add_pre":{"add_op":"-"},"terms":[{"factor":{"primarys":[{"simple_primary":"20"}]}}]}}}}}}}}}}}]}}]}}}}}}}},"arguments":{"argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"function_arguments":{"argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"simple_primary":"100"}]}}]}}}}}}}},"arguments":{"argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"simple_primary":"100"}]}}]}}}}}}}}}}}]}}]}}}}}}}}}}}]}}]}}}}}}}},"comment":{}}}}]}}},"comment":{}}}},{"element_modification_or_replaceable":{"element_modification":{"name":{"name":"graphics"},"modification":{"symbol":"\u003d","expression":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"function_arguments":{"argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"name":{"name":"Ellipse"},"function_call_args":{"arguments":{"named_arguments":{"argument":{"name":"extent","argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"function_arguments":{"argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"function_arguments":{"argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"simple_primary":"66"}]}}]}}}}}}}},"arguments":{"argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"simple_primary":"0"}]}}]}}}}}}}}}}}]}}]}}}}}}}},"arguments":{"argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"function_arguments":{"argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"simple_primary":"74"}]}}]}}}}}}}},"arguments":{"argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"add_pre":{"add_op":"-"},"terms":[{"factor":{"primarys":[{"simple_primary":"8"}]}}]}}}}}}}}}}}]}}]}}}}}}}}}}}]}}]}}}}}}}}},"arguments":{"argument":{"name":"lineColor","argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"function_arguments":{"argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"simple_primary":"0"}]}}]}}}}}}}},"arguments":{"argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"simple_primary":"0"}]}}]}}}}}}}},"arguments":{"argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"simple_primary":"255"}]}}]}}}}}}}}}}}}]}}]}}}}}}}}},"arguments":{"argument":{"name":"fillPattern","argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"component_reference":{"component":"FillPattern.Solid"}}]}}]}}}}}}}}},"arguments":{"argument":{"name":"fillColor","argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"function_arguments":{"argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"simple_primary":"0"}]}}]}}}}}}}},"arguments":{"argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"simple_primary":"0"}]}}]}}}}}}}},"arguments":{"argument":{"expressions":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"simple_primary":"255"}]}}]}}}}}}}}}}}}]}}]}}}}}}}}}}}}}}}}]}}]}}}}}}}}}}]}}]}}}}}}}},"comment":{}}}}]}}},"comment":{}}}},{"element_modification_or_replaceable":{"element_modification":{"name":{"name":"Documentation"},"modification":{"class_modification":{"argument_list":{"argument":[{"element_modification_or_replaceable":{"element_modification":{"name":{"name":"info"},"modification":{"symbol":"\u003d","expression":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"simple_primary":"\"\u003chtml\u003e\n\u003cp\u003e\nThis model demonstrates the impact of the \u003ccode\u003eallowFlowReversal\u003c/code\u003e\nand \u003ccode\u003efrom_dp\u003c/code\u003e parameters on the sizes of nonlinear algebraic loops.\nThe user can change the parameter value in the respective\n\u003ccode\u003eBooleanConstant\u003c/code\u003e blocks and rerun the simulation to compare the performance.\nThe results are also demonstrated below for \u003ccode\u003enRes.k \u003d 20\u003c/code\u003e,\nthe number of parallel branches, which contain one pressure drop element each.\n\u003c/p\u003e\n\u003cp\u003e\nThese results were generated using Dymola 2015FD01 64 bit on Ubuntu 14.04.\n\u003c/p\u003e\n\u003ch4\u003eDefault case:\u003c/h4\u003e\n\u003cp\u003e\n\u003ccode\u003eAllowFlowReversal \u003d true\u003c/code\u003e and \u003ccode\u003efrom_dp \u003d false\u003c/code\u003e\n\u003c/p\u003e\n\u003cp\u003e\nSizes of nonlinear systems of equations: {6, 21, \u003cb\u003e46\u003c/b\u003e}\n\u003c/p\u003e\n\u003cp\u003e\nSizes after manipulation of the nonlinear systems: {1, 19, \u003cb\u003e22\u003c/b\u003e}\n\u003c/p\u003e\n\u003ch4\u003eChange 1: \u003c/h4\u003e\n\u003cp\u003e\n\u003ccode\u003eAllowFlowReversal \u003d false\u003c/code\u003e and \u003ccode\u003efrom_dp \u003d false\u003c/code\u003e\n\u003c/p\u003e\n\u003cp\u003e\nSizes of nonlinear systems of equations: {6, 21}\n\u003c/p\u003e\n\u003cp\u003e\nSizes after manipulation of the nonlinear systems: {1, 19}\n\u003c/p\u003e\n\u003ch4\u003eChange 2: \u003c/h4\u003e\n\u003cp\u003e\n\u003ccode\u003eAllowFlowReversal \u003d false\u003c/code\u003e and \u003ccode\u003efrom_dp \u003d true\u003c/code\u003e\n\u003c/p\u003e\n\u003cp\u003e\nSizes of nonlinear systems of equations: {6, 21}\n\u003c/p\u003e\n\u003cp\u003e\nSizes after manipulation of the nonlinear systems: {1, \u003cb\u003e1\u003c/b\u003e}\n\u003c/p\u003e\n\u003cp\u003e\nThese changes also have a significant impact on the computational speed.\n\u003c/p\u003e\n\u003cp\u003e\nFollowing script can be used in Dymola to compare the CPU times.\nFor this script to work, make sure that Dymola stores at least 4 results.\n\u003c/p\u003e\n\u003cp\u003e\n\u003ccode\u003e\ncpuOld\u003dOutputCPUtime;\u003cbr/\u003e\nevaluateOld\u003dEvaluate;\u003cbr/\u003e\nOutputCPUtime:\u003dtrue;\u003cbr/\u003e\nsimulateModel(\\\"Buildings.Fluid.Examples.Performance.Example1v1(allowFlowReversal.k\u003dtrue, from_dp.k\u003dfalse)\\\", stopTime\u003d10000, numberOfIntervals\u003d10, method\u003d\\\"dassl\\\", resultFile\u003d\\\"Example1v1\\\");\u003cbr/\u003e\nsimulateModel(\\\"Buildings.Fluid.Examples.Performance.Example1v2(from_dp.k\u003dtrue, allowFlowReversal.k\u003dtrue)\\\", stopTime\u003d10000, numberOfIntervals\u003d10, method\u003d\\\"dassl\\\", resultFile\u003d\\\"Example1v2\\\");\u003cbr/\u003e\nsimulateModel(\\\"Buildings.Fluid.Examples.Performance.Example1v1(allowFlowReversal.k\u003dfalse, from_dp.k\u003dfalse)\\\", stopTime\u003d10000, numberOfIntervals\u003d10, method\u003d\\\"dassl\\\", resultFile\u003d\\\"Example1v1\\\");\u003cbr/\u003e\nsimulateModel(\\\"Buildings.Fluid.Examples.Performance.Example1v1(allowFlowReversal.k\u003dfalse, from_dp.k\u003dtrue)\\\", stopTime\u003d10000, numberOfIntervals\u003d10, method\u003d\\\"dassl\\\", resultFile\u003d\\\"Example1v1\\\");\u003cbr/\u003e\ncreatePlot(id\u003d1, position\u003d{15, 10, 592, 421}, range\u003d{0.0, 10000.0, -0.01, 0.35}, autoscale\u003dfalse, grid\u003dtrue);\u003cbr/\u003e\nplotExpression(apply(Example1v1[end-2].CPUtime), false, \\\"Default case\\\", 1);\u003cbr/\u003e\nplotExpression(apply(Example1v2[end].CPUtime), false, \\\"Adding dummy states\\\", 1);\u003cbr/\u003e\nplotExpression(apply(Example1v1[end-1].CPUtime), false, \\\"allowFlowReversal\u003dfalse\\\", 1);\u003cbr/\u003e\nplotExpression(apply(Example1v1[end].CPUtime), false, \\\"allowFlowReversal\u003dfalse, from_dp\u003dtrue\\\", 1);\u003cbr/\u003e\nOutputCPUtime\u003dcpuOld;\u003cbr/\u003e\nEvaluate\u003devaluateOld;\u003c/code\u003e\n\u003c/p\u003e\n\u003cp\u003e\nSee Jorissen et al. (2015) for a discussion.\n\u003c/p\u003e\n\u003ch4\u003eReferences\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e\nFilip Jorissen, Michael Wetter and Lieve Helsen.\u003cbr/\u003e\nSimulation speed analysis and improvements of Modelica\nmodels for building energy simulation.\u003cbr/\u003e\nSubmitted: 11th Modelica Conference. Paris, France. Sep. 2015.\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/html\u003e\""}]}}]}}}}}}}},"comment":{}}}},{"element_modification_or_replaceable":{"element_modification":{"name":{"name":"revisions"},"modification":{"symbol":"\u003d","expression":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"simple_primary":"\"\u003chtml\u003e\n\u003cul\u003e\n\u003cli\u003e\nJuly 14, 2015, by Michael Wetter:\u003cbr/\u003e\nRevised documentation.\n\u003c/li\u003e\n\u003cli\u003e\nApril 17, 2015, by Filip Jorissen:\u003cbr/\u003e\nFirst implementation.\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/html\u003e\""}]}}]}}}}}}}},"comment":{}}}}]}}},"comment":{}}}},{"element_modification_or_replaceable":{"element_modification":{"name":{"name":"__Dymola_Commands"},"modification":{"class_modification":{"argument_list":{"argument":[{"element_modification_or_replaceable":{"element_modification":{"name":{"name":"file"},"modification":{"symbol":"\u003d","expression":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"simple_primary":"\"Resources/Scripts/Dymola/Fluid/Examples/Performance/Example1v1.mos\""}]}}]}}}}}}}},"comment":{"string":"\"Simulate and plot\""}}}}]}}},"comment":{}}}}]}}}}}}}]}
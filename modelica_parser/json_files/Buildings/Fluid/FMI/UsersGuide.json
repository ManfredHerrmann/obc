{"within":[{"name":"Buildings.Fluid.FMI"}],"class_definition":[{"class_prefixes":{"prefix":"package"},"class_specifier":{"long_class_specifier":{"name":"UsersGuide","comment":{"string":"\"User\u0027s Guide\""},"composition":{"element_list":{"element":[{"extends_clause":{"name":{"name":"Modelica.Icons.Information"}}}]},"comp_annotation":{"prefix":"annotation","annotation":{"argument_list":{"argument":[{"element_modification_or_replaceable":{"element_modification":{"name":{"name":"preferredView"},"modification":{"symbol":"\u003d","expression":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"simple_primary":"\"info\""}]}}]}}}}}}}},"comment":{}}}},{"element_modification_or_replaceable":{"element_modification":{"name":{"name":"Documentation"},"modification":{"class_modification":{"argument_list":{"argument":[{"element_modification_or_replaceable":{"element_modification":{"name":{"name":"info"},"modification":{"symbol":"\u003d","expression":{"simple_expression":{"expression1":{"logical_term":{"logical_factor":{"relation":{"expression1":{"terms":[{"factor":{"primarys":[{"simple_primary":"\"\u003chtml\u003e\n\u003cp\u003e\nThis user\u0027s guide describes the FMI package (Wetter et al., 2015).\nThe FMI package has been implemented to facilitate the export\nof thermofluid flow models such as HVAC components, HVAC systems\nand thermal zones as Functional Mockup Units (FMUs).\nThis allows to export thermofluid flow models as FMUs so that they can be\nimported in other simulators.\nTo export thermofluid flow components, a Modelica block is needed\nin order for the model to only have input and output signals\nrather than fluid connectors, as fluid connectors do not impose any causality\non the signal flow.\nThis package implements such blocks and its connectors.\n\u003c/p\u003e\n\u003cp\u003e\nThe main packages are as follows:\n\u003c/p\u003e\n\u003ctable summary\u003d\\\"summary\\\" border\u003d\\\"1\\\" cellspacing\u003d\\\"0\\\" cellpadding\u003d\\\"2\\\" style\u003d\\\"border-collapse:collapse;\\\"\u003e\n\u003ctr\u003e\n  \u003cth\u003ePackage\u003c/th\u003e\u003cth\u003eDescription\u003c/th\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n  \u003ctd\u003e\n  \u003ca href\u003d\\\"modelica://Buildings.Fluid.FMI.ExportContainers\\\"\u003e\n  Buildings.Fluid.FMI.ExportContainers\u003c/a\u003e\n  \u003c/td\u003e\n  \u003ctd\u003e\n  \u003cp\u003e\n  Package with blocks to export thermofluid flow components and systems.\n  \u003c/p\u003e\n  \u003cp\u003e\n  To export an HVAC component or system with a single inlet and outlet port, instantiate\n  \u003ca href\u003d\\\"modelica://Buildings.Fluid.FMI.ExportContainers.ReplaceableTwoPort\\\"\u003e\n  Buildings.Fluid.FMI.ExportContainers.ReplaceableTwoPort\u003c/a\u003e\n  with a replaceable model,\n  or extend from\n  \u003ca href\u003d\\\"modelica://Buildings.Fluid.FMI.ExportContainers.PartialTwoPort\\\"\u003e\n  Buildings.Fluid.FMI.ExportContainers.PartialTwoPort\u003c/a\u003e\n  and add components.\u003cbr/\u003e\n  See\n  \u003ca href\u003d\\\"modelica://Buildings.Fluid.FMI.ExportContainers.Examples.FMUs.Fan\\\"\u003e\n  Buildings.Fluid.FMI.ExportContainers.Examples.FMUs.Fan\u003c/a\u003e\n  and\n  \u003ca href\u003d\\\"modelica://Buildings.Fluid.FMI.ExportContainers.Examples.FMUs.ResistanceVolume\\\"\u003e\n  Buildings.Fluid.FMI.ExportContainers.Examples.FMUs.ResistanceVolume\u003c/a\u003e.\n  \u003c/p\u003e\n  \u003cp\u003e\n  To export an HVAC system that serves a single thermal zone, extend from\n  \u003ca href\u003d\\\"modelica://Buildings.Fluid.FMI.ExportContainers.HVACZone\\\"\u003e\n  Buildings.Fluid.FMI.ExportContainers.HVACZone\u003c/a\u003e\n  and add the HVAC system.\u003cbr/\u003e\n  See\n  \u003ca href\u003d\\\"modelica://Buildings.Fluid.FMI.ExportContainers.Examples.FMUs.HVACZone\\\"\u003e\n  Buildings.Fluid.FMI.ExportContainers.Examples.FMUs.HVACZone\u003c/a\u003e.\n  \u003c/p\u003e\n  \u003cp\u003e\n  To export an HVAC system that serves multiple thermal zones, extend from\n  \u003ca href\u003d\\\"modelica://Buildings.Fluid.FMI.ExportContainers.HVACZones\\\"\u003e\n  Buildings.Fluid.FMI.ExportContainers.HVACZones\u003c/a\u003e\n  and add the HVAC system.\u003cbr/\u003e\n  See\n  \u003ca href\u003d\\\"modelica://Buildings.Fluid.FMI.ExportContainers.Examples.FMUs.HVACZones\\\"\u003e\n  Buildings.Fluid.FMI.ExportContainers.Examples.FMUs.HVACZones\u003c/a\u003e.\n  \u003c/p\u003e\n  \u003cp\u003e\n  To export a single thermal zone, extend from\n  \u003ca href\u003d\\\"modelica://Buildings.Fluid.FMI.ExportContainers.ThermalZone\\\"\u003e\n  Buildings.Fluid.FMI.ExportContainers.ThermalZone\u003c/a\u003e\n  and add the thermal zone.\u003cbr/\u003e\n  See\n  \u003ca href\u003d\\\"modelica://Buildings.Fluid.FMI.ExportContainers.Examples.FMUs.ThermalZone\\\"\u003e\n  Buildings.Fluid.FMI.ExportContainers.Examples.FMUs.ThermalZone\u003c/a\u003e.\n  \u003c/p\u003e\n  \u003cp\u003e\n  To export multiple thermal zones, extend from\n  \u003ca href\u003d\\\"modelica://Buildings.Fluid.FMI.ExportContainers.ThermalZones\\\"\u003e\n  Buildings.Fluid.FMI.ExportContainers.ThermalZones\u003c/a\u003e\n  and add the thermal zone models.\u003cbr/\u003e\n  See\n  \u003ca href\u003d\\\"modelica://Buildings.Fluid.FMI.ExportContainers.Examples.FMUs.ThermalZones\\\"\u003e\n  Buildings.Fluid.FMI.ExportContainers.Examples.FMUs.ThermalZones\u003c/a\u003e.\n  \u003c/p\u003e\n  \u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n  \u003ctd\u003e\n  \u003ca href\u003d\\\"modelica://Buildings.Fluid.FMI.Adaptors\\\"\u003e\n  Buildings.Fluid.FMI.Adaptors\u003c/a\u003e\n  \u003c/td\u003e\n  \u003ctd\u003e\n  \u003cp\u003e\n  Package with adaptors to connect models with fluid ports to blocks that\n  have input and output signals.\n  \u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n  \u003cp\u003e\n  \u003ca href\u003d\\\"modelica://Buildings.Fluid.FMI.Conversion\\\"\u003e\n  Buildings.Fluid.FMI.Conversion\u003c/a\u003e\n  \u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n  \u003cp\u003e\n  Package with blocks that convert between the signal connectors of\n  \u003ca href\u003d\\\"modelica://Buildings.Fluid.FMI.Interfaces\\\"\u003e\n  Buildings.Fluid.FMI.Interfaces\u003c/a\u003e\n  and the real input and output signal connectors of the Modelica Standard Library.\n  \u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n  \u003ca href\u003d\\\"modelica://Buildings.Fluid.FMI.Interfaces\\\"\u003e\n  Buildings.Fluid.FMI.Interfaces\u003c/a\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n  \u003cp\u003e\n  Package with composite connectors that have different input and output\n  signals. These connectors are used to export FMUs, and they contain\n  quantities such as mass flow rate, temperature, optional pressure, etc.\n  \u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\n\u003cp\u003e\nThe package\n\u003ca href\u003d\\\"modelica://Buildings.Fluid.FMI.ExportContainers.Examples.FMUs\\\"\u003e\nBuildings.Fluid.FMI.ExportContainers.Examples.FMUs\u003c/a\u003e\ncontains various examples in which HVAC components, HVAC systems\nand thermal zones are exported as an FMU.\n\u003c/p\u003e\n\u003ch4\u003eTypical use\u003c/h4\u003e\n\u003cp\u003e\nUsers who want to export a single thermofluid flow component, or a\nsubsystem of thermofluid flow components, can use the block\n\u003ca href\u003d\\\"modelica://Buildings.Fluid.FMI.ExportContainers.ReplaceableTwoPort\\\"\u003e\nBuildings.Fluid.FMI.ExportContainers.ReplaceableTwoPort\u003c/a\u003e.\nThis block has a fluid inlet, a fluid outlet, and a replaceable\ncomponent that can be replaced with an HVAC component or system that\nhas an inlet and outlet fluid port.\n\u003c/p\u003e\n\u003cp\u003e\nUsers who want to export a whole HVAC system that serves a single thermal zone\ncan do so by extending the partial block\n\u003ca href\u003d\\\"modelica://Buildings.Fluid.FMI.ExportContainers.HVACZone\\\"\u003e\nBuildings.Fluid.FMI.ExportContainers.HVACZone\u003c/a\u003e.\nThe example\n\u003ca href\u003d\\\"modelica://Buildings.Fluid.FMI.ExportContainers.Examples.FMUs.HVACZone\\\"\u003e\nBuildings.Fluid.FMI.ExportContainers.Examples.FMUs.HVACZone\u003c/a\u003e\nillustrates how this can be accomplished.\u003cbr/\u003e\nSimilar export containers and examples are implemented for HVAC systems that serve multiple thermal zones.\n\u003c/p\u003e\n\u003cp\u003e\nConversely, to export a thermal zone, users can extend the partial block\n\u003ca href\u003d\\\"modelica://Buildings.Fluid.FMI.ExportContainers.ThermalZone\\\"\u003e\nBuildings.Fluid.FMI.ExportContainers.ThermalZone\u003c/a\u003e.\nThe example\n\u003ca href\u003d\\\"modelica://Buildings.Fluid.FMI.ExportContainers.Examples.FMUs.ThermalZone\\\"\u003e\nBuildings.Fluid.FMI.ExportContainers.Examples.FMUs.ThermalZone\u003c/a\u003e\nillustrates how this can be accomplished.\u003cbr/\u003e\nSimilar export containers and examples are implemented for models of multiple thermal zones.\n\u003c/p\u003e\n\u003cp\u003e\nEach example and validation model has a Dymola script that\neither simulates the model, or exports the model as an FMU.\nThe script can be invoked from the pull\ndown menu \u003ccode\u003eCommands -\u0026gt; Export FMU\u003c/code\u003e.\n\u003c/p\u003e\n\u003ch4\u003eOptions\u003c/h4\u003e\n\u003cp\u003e\nIn the\n\u003ca href\u003d\\\"modelica://Buildings.Fluid\\\"\u003eBuildings.Fluid\u003c/a\u003e package,\nmost models have a boolean parameter called \u003ccode\u003eallowFlowReversal\u003c/code\u003e.\nIf set to \u003ccode\u003etrue\u003c/code\u003e, then the flow can be in either direction,\notherwise it needs to be from the inlet to the outlet port.\nThis parameter is also used in the\n\u003ca href\u003d\\\"modelica://Buildings.Fluid.FMI\\\"\u003eBuildings.Fluid.FMI\u003c/a\u003e package.\nThe package was designed in such a way that an FMU,\nif exported with \u003ccode\u003eallowFlowReversal\u003dfalse\u003c/code\u003e\nhas as input the mass flow rate,\npressure and fluid properties of the inflowing fluid. The outputs\nare the outlet mass flow rate, outlet pressure and the fluid\nproperties of the outflowing medium. This allows simulators\nsuch as Ptolemy II\nto evaluate the FMUs in the direction of the mass flow by first\nsetting all inputs, then evaluating the model equations,\nand finally retrieving the\noutputs before proceeding the simulation with the next downstream\ncomponent.\nIf \u003ccode\u003eallowFlowReversal\u003dtrue\u003c/code\u003e, then the connectors have additional\nsignals for the properties of the fluid if it flows backwards.\n\u003c/p\u003e\n\u003cp\u003e\nMost components have a boolean parameter \u003ccode\u003euse_p_in\u003c/code\u003e.\nIf \u003ccode\u003euse_p_in\u003dtrue\u003c/code\u003e, then the pressure is used from the\nconnector, and based on the mass flow rate, the outlet pressure\nis computed and assigned to the outlet connectors.\nIf \u003ccode\u003euse_p_in\u003dfalse\u003c/code\u003e, then the pressure as declared\nby the constant \u003ccode\u003ep_default\u003c/code\u003e of the medium model is\nused, and the component computes no pressure drop.\nSetting \u003ccode\u003euse_p_in\u003dfalse\u003c/code\u003e therefore leads to fewer\nequations, but it requires a component that specifies the mass\nflow rate, such as\n\u003ca href\u003d\\\"modelica://Buildings.Fluid.FMI.ExportContainers.Examples.FMUs.IdealSource_m_flow\\\"\u003e\nBuildings.Fluid.FMI.ExportContainers.Examples.FMUs.IdealSource_m_flow\u003c/a\u003e.\n\u003c/p\u003e\n\u003ch4\u003eNotes\u003c/h4\u003e\n\u003cp\u003e\nNote the following when exporting HVAC component models as an FMU:\n\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e\nFor models with control volumes,\nthe mass balance must be configured using\n\u003ccode\u003emassDynamics\u003dModelica.Fluid.Types.Dynamics.SteadyState\u003c/code\u003e\nwhen used with the media\n\u003ca href\u003d\\\"modelica://Buildings.Media.Air\\\"\u003e\nBuildings.Media.Air\u003c/a\u003e.\nOtherwise, the translation stops with the error\n\u003c/p\u003e\n\u003cpre\u003e\nThe model requires derivatives of some inputs as listed below:\n1 inlet.p\n\u003c/pre\u003e\n\u003cp\u003e\nThe reason is that for\n\u003ca href\u003d\\\"modelica://Buildings.Media.Air\\\"\u003e\nBuildings.Media.Air\u003c/a\u003e,\nmass is proportional to pressure and pressure is proportional\nto density. Hence, \u003ci\u003edm/dt\u003c/i\u003e requires \u003ci\u003edp/dt\u003c/i\u003e,\nbut the time derivative of the pressure is not an input to the model.\n\u003c/p\u003e\n\u003cp\u003e\nFor \u003ca href\u003d\\\"modelica://Buildings.Media.Water\\\"\u003e\nBuildings.Media.Water\u003c/a\u003e, this setting is not needed\nas the mass is independent of pressure.\n\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\nThe model\n\u003ca href\u003d\\\"modelica://Buildings.Fluid.Movers.FlowControlled_m_flow\\\"\u003e\nBuildings.Fluid.Movers.FlowControlled_m_flow\u003c/a\u003e\ncannot be exported as an FMU.\nThis is because it assignes the mass flow rate.\nHowever, the input connector\n\u003ca href\u003d\\\"modelica://Buildings.Fluid.FMI.Interfaces.Inlet\\\"\u003e\nBuildings.Fluid.FMI.Interfaces.Inlet\u003c/a\u003e\nalready declares the mass flow rate as an input.\nTherefore, the mass flow rate is overdetermined.\nAs a fall back, if a user needs to set the mass flow rate, he/she can\ndo so by using\n\u003ca href\u003d\\\"modelica://Buildings.Fluid.FMI.Source_T\\\"\u003e\nBuildings.Fluid.FMI.Source_T\u003c/a\u003e,\nwhich takes as an input signal the mass flow rate.\n\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e\nWhen connecting fluid flow components in a loop,\nbe careful to avoid circular assignments for example for the temperature,\nas these can of course not be simulated.\nAn example of such an ill-posed problem is to connect the outlet of\n\u003ca href\u003d\\\"modelica://Buildings.Fluid.FixedResistances.PressureDrop\\\"\u003e\nBuildings.Fluid.FixedResistances.PressureDrop\u003c/a\u003e\nto its inlet. In this situation, neither pressure, nor mass flow rate or temperature\ncan be computed. To model such loops, a control volume with a dynamic energy\nbalance must be presented, and the medium needs to be compressible.\n\u003c/p\u003e\n\u003ch4\u003eReferences\u003c/h4\u003e\n\u003cp\u003e\nMichael Wetter, Marcus Fuchs and Thierry Stephane Nouidui.\u003cbr/\u003e\n\u003ca href\u003d\\\"modelica://Buildings/Resources/Images/Fluid/FMI/UsersGuide/2015-WetterFuchsNouidui.pdf\\\"\u003e\nDesign choices for thermofluid flow components and systems that are exported as Functional Mockup Units\u003c/a\u003e.\u003cbr/\u003e\n\u003ci\u003eProc. of the 11th International Modelica Conference\u003c/i\u003e,\n   p. 31-41,\n   Versailles, France, September 2015.\n\u003c/p\u003e\n\u003c/html\u003e\""}]}}]}}}}}}}},"comment":{}}}}]}}},"comment":{}}}}]}}}}}}}]}